
<!-- serve static files -->
{% load static %}
<!DOCTYPE HTML>
<html>

<head>

    <title> Wirespace </title>
    <link rel="stylesheet" type="text/css" href="{% static 'share/css/w3.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'share/css/font-awesome.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'share/css/custom.css' %}">
</head>

<body class="w3-light-gray HelFont">
	
	<div id="body">
	</div>
	<div id="menu">
	</div>
	<div id="form" style="display: none;">
		<form id="uploadFile" method="POST" action="upload/" enctype="multipart/form-data" >
			<input type="hidden" id="address" name="address" value=''>
			<input style="display:block;" type="file" name="ufile" multiple>
		</form>
		<form id="uploadFolder" method="POST" action="uploadFolder/" enctype="multipart/form-data" >
			<input type="hidden" id="address" name="address" value=''>
			<input style="display:block;" id="uploadDir" type="file" name="directory" webkitdirectory>
		</form>
		<form id="delete" method="POST" action="delete/"  onsubmit="return delete_input()">
			<input type="hidden" id="address" name="address" value="">
			<input type="submit" value="delete">
		</form>
		<form id="downloadform" action="download/" method="POST">
			<input type="text" name="target" id="targetlink">
			<input type="submit" value="submit">
		</form>
		<form id="openform" action="open/" method="POST" target="_blank">
			<input type="text" name="target" id="otargetlink">
			<input type="submit" value="submit">
		</form>
	</div>
    <script src = "{% static 'share/index.js' %}">
	</script>
	<script>
		document.getElementById("uploadFile").addEventListener("change", function(event) {
			  document.forms['uploadFile'].submit();
			}, false);
		document.getElementById("uploadDir").addEventListener("change", function(event) {
			  var files = event.target.files;
			  var address_list=[];
			  for (var i=0; i<files.length; i++) {
			    address_list.push(files[i].webkitRelativePath);
			  };
			  	var form=document.forms['uploadFolder'];
				var obj=document.createElement('input');
				obj.type="hidden";
				obj.name="address_list";
				obj.value=address_list;
				form.appendChild(obj);
				form.submit();
			}, false);
	function rename_input(){
		var name=prompt("Please enter the source folder/file name:");
		if (name==null || name == ""){
			return false;
		}
		else{
			var form=document.forms['rename'];
			var obj=document.createElement('input');
			obj.type="hidden";
			obj.name="source_name";
			obj.value=name;
			form.appendChild(obj);
			tname=prompt("Please enter the target folder/file name:");
			if (tname==null || tname == ""){
				return false;
			}
			else{
				var obj2=document.createElement('input');
				obj2.type="hidden";
				obj2.name="target_name";
				obj2.value=tname;
				form.appendChild(obj2);
				return true;	
			}
		}
	}function delete_input(){
		var name=prompt("Please enter a folder/file name:");
		if (name==null || name == ""){
			return false;
		}
		else{
			var form=document.forms['delete'];
			var obj=document.createElement('input');
			obj.type="hidden";
			obj.name="name";
			obj.value=name;
			form.appendChild(obj);
			return true;
		}
	}
    </script>
</body>
</html>
